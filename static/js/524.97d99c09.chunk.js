(self.webpackChunkcontainer=self.webpackChunkcontainer||[]).push([[524],{4098:function(t,e){var o="undefined"!=typeof self?self:this,n=function(){function t(){this.fetch=!1,this.DOMException=o.DOMException}return t.prototype=o,new t}();!function(t){!function(e){var o="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,r="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in t,s="ArrayBuffer"in t;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function d(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function f(t){this.map={},t instanceof f?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(t){return new Promise((function(e,o){t.onload=function(){e(t.result)},t.onerror=function(){o(t.error)}}))}function g(t){var e=new FileReader,o=h(e);return e.readAsArrayBuffer(t),o}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:r&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:o&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s&&r&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(t)||c(t))?this._bodyArrayBuffer=y(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,o,n=p(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,o=h(e=new FileReader),e.readAsText(t),o;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),o=new Array(e.length),n=0;n<e.length;n++)o[n]=String.fromCharCode(e[n]);return o.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=u(t),e=l(e);var o=this.map[t];this.map[t]=o?o+", "+e:e},f.prototype.delete=function(t){delete this.map[u(t)]},f.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},f.prototype.set=function(t,e){this.map[u(t)]=l(e)},f.prototype.forEach=function(t,e){for(var o in this.map)this.map.hasOwnProperty(o)&&t.call(e,this.map[o],o,this)},f.prototype.keys=function(){var t=[];return this.forEach((function(e,o){t.push(o)})),d(t)},f.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),d(t)},f.prototype.entries=function(){var t=[];return this.forEach((function(e,o){t.push([o,e])})),d(t)},n&&(f.prototype[Symbol.iterator]=f.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t,e){var o,n,r=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(n=(o=e.method||this.method||"GET").toUpperCase(),w.indexOf(n)>-1?n:o),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function m(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var o=t.split("="),n=o.shift().replace(/\+/g," "),r=o.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(r))}})),e}function E(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},v.call(b.prototype),v.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var j=[301,302,303,307,308];E.redirect=function(t,e){if(-1===j.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var o=Error(t);this.stack=o.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function x(t,o){return new Promise((function(n,i){var s=new b(t,o);if(s.signal&&s.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var t,e,o={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var o=t.split(":"),n=o.shift().trim();if(n){var r=o.join(":").trim();e.append(n,r)}})),e)};o.url="responseURL"in a?a.responseURL:o.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;n(new E(r,o))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),s.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}x.polyfill=!0,t.fetch||(t.fetch=x,t.Headers=f,t.Request=b,t.Response=E),e.Headers=f,e.Request=b,e.Response=E,e.fetch=x,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var r=n;(e=r.fetch).default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,t.exports=e},4634:function(t,e,o){var n;if("function"==typeof fetch&&(void 0!==o.g&&o.g.fetch?n=o.g.fetch:"undefined"!=typeof window&&window.fetch&&(n=window.fetch)),"undefined"==typeof window||void 0===window.document){var r=n||o(4098);r.default&&(r=r.default),e.default=r,t.exports=e.default}},5524:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return L}});var n=[],r=n.forEach,i=n.slice;function s(t){return r.call(i.call(arguments,1),(function(e){if(e)for(var o in e)void 0===t[o]&&(t[o]=e[o])})),t}function a(t,e,o){function n(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}for(var r="string"!=typeof e?[].concat(e):e.split(".");r.length>1;){if(!t)return{};var i=n(r.shift());!t[i]&&o&&(t[i]=new o),t=t[i]}return t?{obj:t,k:n(r.shift())}:{}}function c(t,e,o){var n=a(t,e,Object);n.obj[n.k]=o}function u(t,e){var o=a(t,e),n=o.obj,r=o.k;if(n)return n[r]}var l=new RegExp("{{(.+?)}}","g");function d(t,e,o){for(var n,r,i;n=l.exec(t);)"string"!=typeof(r=n[1].trim())&&(r=null==(i=r)?"":""+i),r||(r=""),r=r.replace(/\$/g,"$$$$"),t=t.replace(n[0],e[r]||r),l.lastIndex=0;return t}function f(t,e){return e.reduce((function(e,o){if(e)return e;if(!t||!t[o]||"string"!=typeof t[o]||!t[o].toLowerCase()===o.toLowerCase()){var n='i18next-locize-backend :: got "'.concat(t[o],'" in options for ').concat(o," which is invalid.");return console.warn(n),n}return!1}),!1)}function p(){var t,e,o=new Promise((function(o,n){t=o,e=n}));return o.resolve=t,o.reject=e,o}var h,g,y,v=o(4634),w=o.t(v,2);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}"function"==typeof fetch&&("undefined"!=typeof global&&global.fetch?h=global.fetch:"undefined"!=typeof window&&window.fetch&&(h=window.fetch)),"function"!=typeof XMLHttpRequest&&"object"!==("undefined"==typeof XMLHttpRequest?"undefined":b(XMLHttpRequest))||("undefined"!=typeof global&&global.XMLHttpRequest?g=global.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(g=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&("undefined"!=typeof global&&global.ActiveXObject?y=global.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(y=window.ActiveXObject)),h||!w||g||y||(h=v||w),"function"!=typeof h&&(h=void 0);var m,E=function(t,e,o,n){return"function"==typeof o&&(n=o,o=void 0),n=n||function(){},h?function(t,e,o,n){var r={};t.authorize&&t.apiKey&&(r.Authorization=t.apiKey),(o||t.setContentTypeJSON)&&(r["Content-Type"]="application/json"),h(e,{method:o?"POST":"GET",body:o?JSON.stringify(o):void 0,headers:r}).then((function(t){var e=t.headers&&"Error from cloudfront"===t.headers.get("x-cache");if(!t.ok)return n(t.statusText||"Error",{status:t.status,resourceNotExisting:e});t.text().then((function(o){n(null,{status:t.status,data:o,resourceNotExisting:e})})).catch(n)})).catch(n)}(t,e,o,n):"function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":b(XMLHttpRequest))||"function"==typeof ActiveXObject?function(t,e,o,n){try{var r;(r=g?new g:new y("MSXML2.XMLHTTP.3.0")).open(o?"POST":"GET",e,1),t.crossDomain||r.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.authorize&&t.apiKey&&r.setRequestHeader("Authorization",t.apiKey),(o||t.setContentTypeJSON)&&r.setRequestHeader("Content-Type","application/json"),r.onreadystatechange=function(){var t="Error from cloudfront"===r.getResponseHeader("x-cache");r.readyState>3&&n(r.status>=400?r.statusText:null,{status:r.status,data:r.responseText,resourceNotExisting:t})},r.send(JSON.stringify(o))}catch(t){console&&console.log(t)}}(t,e,o,n):void 0};function j(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}try{m="undefined"!=typeof window&&null!==window.localStorage;var x="notExistingLocizeProject";window.localStorage.setItem(x,"foo"),window.localStorage.removeItem(x)}catch(t){m=!1}var O=function(){function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.services=e,this.options=o,this.allOptions=n,this.type="backend",e&&e.projectId?this.init(null,e,n,o):this.init(e,o,n,r)}var e,o;return e=t,o=[{key:"init",value:function(t){var e,o,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0;!i.referenceLng&&a.fallbackLng&&Array.isArray(a.fallbackLng)&&"dev"!==a.fallbackLng[0]&&(i.referenceLng=a.fallbackLng[0]),this.services=t,this.options=s(i,this.options||{},{loadPath:"https://api.locize.app/{{projectId}}/{{version}}/{{lng}}/{{ns}}",privatePath:"https://api.locize.app/private/{{projectId}}/{{version}}/{{lng}}/{{ns}}",getLanguagesPath:"https://api.locize.app/languages/{{projectId}}",addPath:"https://api.locize.app/missing/{{projectId}}/{{version}}/{{lng}}/{{ns}}",updatePath:"https://api.locize.app/update/{{projectId}}/{{version}}/{{lng}}/{{ns}}",referenceLng:"en",crossDomain:!0,setContentTypeJSON:!1,version:"latest",private:!1,translatedPercentageThreshold:.9,failLoadingOnEmptyJSON:!1,allowedAddOrUpdateHosts:["localhost"],onSaved:!1,reloadInterval:"undefined"==typeof window&&36e5,checkForProjectTimeout:3e3,storageExpiration:36e5,writeDebounce:5e3}),this.allOptions=a,this.somethingLoaded=!1,this.isProjectNotExisting=!1,this.storage=(e=this.options.storageExpiration,o=function(){},n=function(){},m?(o=function(t){window.localStorage.setItem("notExistingLocizeProject_".concat(t),Date.now())},n=function(t){var o=window.localStorage.getItem("notExistingLocizeProject_".concat(t));return!(!o||Date.now()-o>e&&(window.localStorage.removeItem("notExistingLocizeProject_".concat(t)),1))}):"undefined"!=typeof document&&(o=function(t){var o=new Date;o.setTime(o.getTime()+e);var n="; expires=".concat(o.toGMTString()),r="notExistingLocizeProject_".concat(t);try{document.cookie="".concat(r,"=").concat(Date.now()).concat(n,";path=/")}catch(t){}},n=function(t){var e="notExistingLocizeProject_".concat(t),o="".concat(e,"=");try{for(var n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(o))return!0}}catch(t){}return!1}),{setProjectNotExisting:o,isProjectNotExisting:n}),this.options.pull&&console.warn('The pull API was removed use "private: true" option instead: https://docs.locize.com/integration/api#fetch-private-namespace-resources');var u,l,d,f="undefined"!=typeof window&&window.location&&window.location.hostname;f?(this.isAddOrUpdateAllowed="function"==typeof this.options.allowedAddOrUpdateHosts?this.options.allowedAddOrUpdateHosts(f):this.options.allowedAddOrUpdateHosts.indexOf(f)>-1,t&&t.logger&&(a.saveMissing||a.updateMissing)&&(this.isAddOrUpdateAllowed?"localhost"!==f&&t.logger.warn('locize-backend: you are using the save or update missings feature from this host "'.concat(f,'".\nMake sure you will not use it in production!\nhttps://docs.locize.com/guides-tips-and-tricks/going-production')):t.logger.warn("function"==typeof this.options.allowedAddOrUpdateHosts?'locize-backend: will not save or update missings because allowedAddOrUpdateHosts returned false for the host "'.concat(f,'".'):'locize-backend: will not save or update missings because the host "'.concat(f,'" was not in the list of allowedAddOrUpdateHosts: ').concat(this.options.allowedAddOrUpdateHosts.join(", ")," (matches need to be exact).")))):this.isAddOrUpdateAllowed=!0,"function"==typeof c&&this.getOptions((function(t,e,o){if(t)return c(t);r.options.referenceLng=i.referenceLng||e.referenceLng||r.options.referenceLng,c(null,e,o)})),this.queuedWrites={pending:{}},this.debouncedProcess=(u=this.process,l=this.options.writeDebounce,function(){var t=this,e=arguments;clearTimeout(d),d=setTimeout((function(){d=null,u.apply(t,e)}),l)}),this.interval&&clearInterval(this.interval),this.options.reloadInterval&&this.options.projectId&&(this.interval=setInterval((function(){return r.reload()}),this.options.reloadInterval))}},{key:"reload",value:function(){var t=this,e=this.services||{logger:console},o=e.backendConnector,n=e.languageUtils,r=e.logger;if(o){var i=o.language;if(!i||"cimode"!==i.toLowerCase()){var s=[],a=function(t){n.toResolveHierarchy(t).forEach((function(t){s.indexOf(t)<0&&s.push(t)}))};a(i),this.allOptions.preload&&this.allOptions.preload.forEach((function(t){return a(t)})),s.forEach((function(e){t.allOptions.ns.forEach((function(t){o.read(e,t,"read",null,null,(function(n,i){n&&r.warn("loading namespace ".concat(t," for language ").concat(e," failed"),n),!n&&i&&r.log("loaded namespace ".concat(t," for language ").concat(e),i),o.loaded("".concat(e,"|").concat(t),n,i)}))}))}))}}}},{key:"getLanguages",value:function(t){var e,o=this;t||(e=p(),t=function(t,o){if(t)return e.reject(t);e.resolve(o)});var n=f(this.options,["projectId"]);if(n)return t(new Error(n));var r=d(this.options.getLanguagesPath,{projectId:this.options.projectId});return!this.isProjectNotExisting&&this.storage.isProjectNotExisting(this.options.projectId)&&(this.isProjectNotExisting=!0),this.isProjectNotExisting?t(new Error("locize project ".concat(this.options.projectId," does not exist!"))):(this.getLanguagesCalls=this.getLanguagesCalls||[],this.getLanguagesCalls.push(t),this.getLanguagesCalls.length>1?void 0:(this.loadUrl({},r,(function(t,e,n){if(!o.somethingLoaded&&n&&n.resourceNotExisting){o.isProjectNotExisting=!0,o.storage.setProjectNotExisting(o.options.projectId);var r=new Error("locize project ".concat(o.options.projectId," does not exist!")),i=o.getLanguagesCalls;return o.getLanguagesCalls=[],i.forEach((function(t){return t(r)}))}if(e){var s=Object.keys(e).reduce((function(t,o){return e[o].isReferenceLanguage&&(t=o),t}),"");s&&o.options.referenceLng!==s&&(o.options.referenceLng=s)}o.somethingLoaded=!0;var a=o.getLanguagesCalls;o.getLanguagesCalls=[],a.forEach((function(o){return o(t,e)}))})),e))}},{key:"getOptions",value:function(t){var e,o=this;return t||(e=p(),t=function(t,o){if(t)return e.reject(t);e.resolve(o)}),this.getLanguages((function(e,n){if(e)return t(e);var r=Object.keys(n);if(!r.length)return t(new Error("was unable to load languages via API"));var i=r.reduce((function(t,e){var r=n[e];return r.translated[o.options.version]&&r.translated[o.options.version]>=o.options.translatedPercentageThreshold&&t.push(e),t}),[]),s=r.reduce((function(t,e){return e.indexOf("-")>-1||t}),!1);t(null,{fallbackLng:o.options.referenceLng,referenceLng:o.options.referenceLng,supportedLngs:i,load:s?"all":"languageOnly"},n)})),e}},{key:"checkIfProjectExists",value:function(t){var e=this,o=(this.services||{logger:console}).logger;this.somethingLoaded?t&&t(null):this.alreadyRequestedCheckIfProjectExists?setTimeout((function(){return e.checkIfProjectExists(t)}),this.options.checkForProjectTimeout):(this.alreadyRequestedCheckIfProjectExists=!0,this.getLanguages((function(e){e&&e.message&&e.message.indexOf("does not exist")>0&&o&&o.error(e.message),t&&t(e)})))}},{key:"read",value:function(t,e,o){var n,r=this,i=(this.services||{logger:console}).logger,s={};if(this.options.private){var a=f(this.options,["projectId","version","apiKey"]);if(a)return o(new Error(a),!1);n=d(this.options.privatePath,{lng:t,ns:e,projectId:this.options.projectId,version:this.options.version}),s={authorize:!0}}else{var c=f(this.options,["projectId","version"]);if(c)return o(new Error(c),!1);n=d(this.options.loadPath,{lng:t,ns:e,projectId:this.options.projectId,version:this.options.version})}if(!this.isProjectNotExisting&&this.storage.isProjectNotExisting(this.options.projectId)&&(this.isProjectNotExisting=!0),this.isProjectNotExisting){var u=new Error("locize project ".concat(this.options.projectId," does not exist!"));return i&&i.error(u.message),void(o&&o(u))}this.loadUrl(s,n,(function(t,e,n){r.somethingLoaded||(n&&n.resourceNotExisting?setTimeout((function(){return r.checkIfProjectExists()}),r.options.checkForProjectTimeout):r.somethingLoaded=!0),o(t,e)}))}},{key:"loadUrl",value:function(t,e,o,n){var r=this;t=s(t,this.options),"function"==typeof o&&(n=o,o=void 0),n=n||function(){},E(t,e,o,(function(t,o){var i,s,a=o&&o.resourceNotExisting;if(o&&(408===o.status||400===o.status))return n("failed loading "+e,!0,{resourceNotExisting:a});if(o&&(o.status>=500&&o.status<600||!o.status))return n("failed loading "+e,!0,{resourceNotExisting:a});if(o&&o.status>=400&&o.status<500)return n("failed loading "+e,!1,{resourceNotExisting:a});if(!o&&t&&t.message&&t.message.indexOf("Failed to fetch")>-1)return n("failed loading "+e,!0,{resourceNotExisting:a});if(t)return n(t,!1);try{i=JSON.parse(o.data)}catch(t){s="failed parsing "+e+" to json"}return s?n(s,!1):r.options.failLoadingOnEmptyJSON&&!Object.keys(i).length?n("loaded result empty for "+e,!1,{resourceNotExisting:a}):void n(null,i,{resourceNotExisting:a})}))}},{key:"create",value:function(t,e,o,n,r,i){var s=this;r||(r=function(){}),this.checkIfProjectExists((function(a){if(a)return r(a);var c=f(s.options,["projectId","version","apiKey","referenceLng"]);return c?r(new Error(c)):s.isAddOrUpdateAllowed?("string"==typeof t&&(t=[t]),t.filter((function(t){return t===s.options.referenceLng})).length<1&&s.services&&s.services.logger&&s.services.logger.warn('locize-backend: will not save missings because the reference language "'.concat(s.options.referenceLng,'" was not in the list of to save languages: ').concat(t.join(", ")," (open your site in the reference language to save missings).")),void t.forEach((function(t){t===s.options.referenceLng&&s.queue.call(s,s.options.referenceLng,e,o,n,r,i)}))):r("host is not allowed to create key.")}))}},{key:"update",value:function(t,e,o,n,r,i){var s=this;r||(r=function(){}),this.checkIfProjectExists((function(a){if(a)return r(a);var c=f(s.options,["projectId","version","apiKey","referenceLng"]);return c?r(new Error(c)):s.isAddOrUpdateAllowed?(i||(i={}),"string"==typeof t&&(t=[t]),i.isUpdate=!0,void t.forEach((function(t){t===s.options.referenceLng&&s.queue.call(s,s.options.referenceLng,e,o,n,r,i)}))):r("host is not allowed to update key.")}))}},{key:"writePage",value:function(t,e,o,n){var r=d(this.options.addPath,{lng:t,ns:e,projectId:this.options.projectId,version:this.options.version}),i=d(this.options.updatePath,{lng:t,ns:e,projectId:this.options.projectId,version:this.options.version}),a=!1,c=!1,u={},l={};o.forEach((function(t){var e=t.options&&t.options.tDescription?{value:t.fallbackValue||"",context:{text:t.options.tDescription}}:t.fallbackValue||"";t.options&&t.options.isUpdate?(c||(c=!0),l[t.key]=e):(a||(a=!0),u[t.key]=e)}));var f=0;a&&f++,c&&f++;var p=function(t){--f||n(t)};f||p(),a&&E(s({authorize:!0},this.options),r,u,p),c&&E(s({authorize:!0},this.options),i,l,p)}},{key:"write",value:function(t,e){var o=this;if(!u(this.queuedWrites,["locks",t,e])){var n=u(this.queuedWrites,[t,e]);c(this.queuedWrites,[t,e],[]);var r=1e3,i=n.filter((function(t){return t.callback})).map((function(t){return t.callback}));n.length&&function(){c(o.queuedWrites,["locks",t,e],!0);var s=function(){c(o.queuedWrites,["locks",t,e],!1),i.forEach((function(t){return t()})),o.options.onSaved&&o.options.onSaved(t,e),o.debouncedProcess(t,e)},a=n.length/r,u=0,l=n.splice(0,r);for(o.writePage(t,e,l,(function(){++u>=a&&s()}));l.length===r;)(l=n.splice(0,r)).length&&o.writePage(t,e,l,(function(){++u>=a&&s()}))}()}}},{key:"process",value:function(){var t=this;Object.keys(this.queuedWrites).forEach((function(e){"locks"!==e&&Object.keys(t.queuedWrites[e]).forEach((function(o){t.queuedWrites[e][o].length&&t.write(e,o)}))}))}},{key:"queue",value:function(t,e,o,n,r,i){var s,c,u,l;s={key:o,fallbackValue:n||"",callback:r,options:i},(u=(c=a(this.queuedWrites,[t,e],Object)).obj)[l=c.k]=u[l]||[],u[l].push(s),this.debouncedProcess()}}],o&&j(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();O.type="backend";var L=O}}]);
//# sourceMappingURL=524.97d99c09.chunk.js.map